<div class="places-table">
  <div class="panel panel-default">
    <div class="panel-heading"><%= I18n.t("place.list") %></div>
    <div class="panel-body">
      <%= link_to I18n.t("place.new.title"), new_place_path, 
              data: { modal: true }, class:"btn btn-primary add-place-btn" %>
      <!-- Table -->
      <table class="table table-striped table-bordered table-list">
        <thead>
          <tr>
            <th><%= I18n.t("place.name") %></th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @places.each  do |place| %>
            <tr>
              <td><%= place.name %></td>
              <td><%= link_to '<i class="fa fa-edit"></i>'.html_safe, [:edit, place] %>
                  <%= link_to '<i class="fa fa-times"></i>'.html_safe, place, method: :delete %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    var dataTable = $('.table').DataTable();

    document.addEventListener("turbolinks:before-cache", function() {
      if (dataTable !== null) {
        dataTable.destroy();
        dataTable = null;
      }
    });
  });
</script>